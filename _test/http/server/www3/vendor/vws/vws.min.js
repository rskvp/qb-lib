!function(n){var o={};function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";function o(){}n.r(e),n.d(e,"ROOT",function(){return B});var r=(o.now=function(){return Date.now?Date.now():(new Date).getTime()},o.guid=function(){return o._s4()+o._s4()+"-"+o._s4()+"-"+o._s4()+"-"+o._s4()+"-"+o._s4()+o._s4()+o._s4()},o.uniqueId=function(t){var e=++o._id_counter+"";return t?t+e:e},o._s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},o._id_counter=0,o);function i(){this._uid=r.uniqueId(i.PREFIX)}var s=(Object.defineProperty(i.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),i.PREFIX="lyts_object_",i),c=(u.prototype.putAll=function(t){var e;for(var n in e=t instanceof u?t._items:t)e.hasOwnProperty(n)&&this.put(n,e[n])},u.prototype.put=function(t,e){this._items[t]=e,this._count++},u.prototype.get=function(t){return this._items[t]},u.prototype.containsKey=function(t){return this._items.hasOwnProperty(t)},u.prototype.count=function(){return this._count},u.prototype.isEmpty=function(){return 0===this._count},u.prototype.keys=function(){var t=[];for(var e in this._items)t.push(e);return t},u.prototype.remove=function(t){var e=this._items[t];return delete this._items[t],this._count--,e},u.prototype.values=function(){var t=[];for(var e in this._items)t.push(this._items[e]);return t},u.prototype.clear=function(){this.isEmpty()||(this._items={})},u);function u(t){if(this._items={},this._count=0,t)for(var e in t)t.hasOwnProperty(e)&&this.put(e,t[e])}var a,p,l=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,c=i.length;s<c;s++,r++)o[r]=i[s];return o};function f(){this._uid=r.guid(),this._level=a.info,this._class_levels=new c}(p=a=a||{})[p.error=0]="error",p[p.warn=1]="warn",p[p.info=2]="info",p[p.debug=3]="debug";var h=(Object.defineProperty(f.prototype,"uid",{get:function(){return this._uid},set:function(t){this._uid=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),f.prototype.setClassLevel=function(t,e){this._class_levels.put(t,e)},f.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];console.error.apply(console,l(["["+this.uid+"] "+t,e],n))},f.prototype.warn=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.getLevel(t)<a.warn||console.warn.apply(console,l(["["+this.uid+"] "+t],e))},f.prototype.info=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.getLevel(t)<a.info||console.info.apply(console,l(["["+this.uid+"] "+t],e))},f.prototype.debug=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.getLevel(t)<a.debug||console.log.apply(console,l(["["+this.uid+"] "+t],e))},f.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.getLevel(t)<a.info||console.log.apply(console,l(["["+this.uid+"] "+t],e))},f.prototype.getLevel=function(t){if(t){var e=t.split(".")[0];if(this._class_levels.containsKey(e))return this._class_levels.get(e)}return this.level},f.instance=function(){return null==f.__instance&&(f.__instance=new f),f.__instance},f).instance(),_=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,c=i.length;s<c;s++,r++)o[r]=i[s];return o};function y(){}var v=(Object.defineProperty(y.prototype,"window",{get:function(){return window},enumerable:!0,configurable:!0}),y.prototype.parse=function(t){try{if(this.isString(t))return JSON.parse(t)}catch(t){}return t},y.prototype.toString=function(t){switch(typeof t){case"string":case"number":case"boolean":return t+"";case"object":try{return null===t?"":JSON.stringify(t)}catch(t){return"{...}"}default:return""}},y.prototype.toArray=function(t){return t?this.isArray(t)?t:[t]:[]},y.prototype.toBoolean=function(t,e){return t?"false"!==t&&"0"!==t:e},y.prototype.toFloat=function(t,e,n,o){void 0===e&&(e=0);try{var r=parseFloat(t.replace(/,/g,"."));return r=this.isNaN(r)?e:r,!this.isNaN(o)&&(o||0)<r&&(r=o||0),!this.isNaN(n)&&r<(n||0)&&(r=n||0),r}catch(t){return e}},y.prototype.toInt=function(t,e,n,o){void 0===e&&(e=0);try{var r=parseInt(t);return r=this.isNaN(r)?e:r,!this.isNaN(o)&&(o||0)<r&&(r=o||0),!this.isNaN(n)&&r<(n||0)&&(r=n||0),r}catch(t){return e}},y.prototype.isFunction=function(t){return"function"==typeof t},y.prototype.isObject=function(t){return t===Object(t)},y.prototype.isArray=function(t){return Array.isArray?Array.isArray(t):t&&"object"==typeof t&&"number"==typeof t.length&&"[object Array]"==toString.call(t)||!1},y.prototype.isArguments=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"[object Arguments]"==toString.call(t)||!1},y.prototype.isBoolean=function(t){return!0===t||!1===t||t&&"object"==typeof t&&"[object Boolean]"==toString.call(t)||!1},y.prototype.isString=function(t){return"string"==typeof t||t&&"object"==typeof t&&"[object String]"==toString.call(t)||!1},y.prototype.isNumber=function(t){return"number"==typeof t||t&&"object"==typeof t&&"[object Number]"==toString.call(t)||!1},y.prototype.isNaN=function(t){return isNaN(t)},y.isDate=function(t){return t&&"object"==typeof t&&"[object Date]"==toString.call(t)||!1},y.prototype.funcInvoke=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t&&this.isFunction(t)?0===e.length?t.call(this):t.call.apply(t,_([this],e)):null},y.prototype.funcDelay=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return setTimeout(function(){return t.call.apply(t,_([null],n))},e)},y.instance=function(){return null==y.__instance&&(y.__instance=new y),y.__instance},y).instance();function d(){this._events=new c,this._maxListeners=0}var g,b,m=(d.prototype.getMaxListeners=function(){return 0===this._maxListeners?d.DEFAULT_MAX_LISTENERS:this._maxListeners},d.prototype.setMaxListeners=function(t){return this._maxListeners=t,this},d.prototype.addListener=function(t,e){return this.on(t,e)},d.prototype.on=function(t,e){return this._registerEvent(t,e,!1),this},d.prototype.once=function(t,e){return this._registerEvent(t,e,!0),this},d.prototype.off=function(t,e){var n=v.isArray(t)?t:t?[t]:[];if(e)for(var o=0,r=n;o<r.length;o++){var i=r[o];this.removeListener(i,e)}else 0<n.length?this.removeAllListeners(n):this.removeAllListeners();return this},d.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this._events.get(t),r=this.listenerCount(t);return o&&o.map(function(t){return t.apply(void 0,e)}),0!==r},d.prototype.eventNames=function(){return this._events.keys()},d.prototype.listeners=function(t){return this._events.get(t)},d.prototype.listenerCount=function(t){var e=this._events.get(t);return void 0===e?0:e.length},d.prototype.removeAllListeners=function(t){var e=this;return(t=t||this._events.keys()).forEach(function(t){return e._events.remove(t)}),this},d.prototype.removeListener=function(t,e){var n=this.listeners(t),o=n?n.filter(function(t){return t===e}):[];return this._events.put(t,o),this},d.prototype.clear=function(){this._events.clear()},d.prototype._registerEvent=function(t,e,n){if(this._listenerLimitReached(t))h.warn("Events._registerEvent","Maximum listener reached, new Listener not added",this.getMaxListeners());else{!0===n&&(e=this._createOnceListener(e,t));var o=d._createListeners(e,this.listeners(t));this._events.put(t,o)}},d.prototype._createOnceListener=function(n,o){var r=this;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.removeListener(o,n),n.apply(void 0,t)}},d.prototype._listenerLimitReached=function(t){return this.listenerCount(t)>=this.getMaxListeners()},d._createListeners=function(t,e){return(e=e||[]).push(t),e},d.DEFAULT_MAX_LISTENERS=10,d),k=(g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,c=i.length;s<c;s++,r++)o[r]=i[s];return o};function O(){var t=b.call(this)||this;return t._listeners=new c,t}var j,S,L=(k(O,b=s),O.prototype.on=function(t,e,n){if(t){var o=O.key(t);this._listeners.containsKey(o)||this._listeners.put(o,new m),this._listeners.get(o).on(e,n.bind(t))}},O.prototype.once=function(t,e,n){if(t){var o=O.key(t);this._listeners.containsKey(o)||this._listeners.put(o,new m),this._listeners.get(o).once(e,n.bind(t))}},O.prototype.off=function(t,e){if(t){var n=O.key(t);this._listeners.containsKey(n)&&this._listeners.get(n).off(e)}},O.prototype.clear=function(){if(this._listeners)for(var t=0,e=this._listeners.keys();t<e.length;t++){var n=e[t];this._listeners.containsKey(n)&&this._listeners.get(n).clear()}},O.prototype.emit=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(this._listeners)for(var r=0,i=this._listeners.keys();r<i.length;r++){var s=i[r];this._listeners.containsKey(s)&&(e=this._listeners.get(s)).emit.apply(e,w([t],n))}},O.key=function(t){try{return t.uid}catch(t){return console.warn("ApplicationEvents.key()","BINDING EVENT ON DEFAULT KEY!"),"_default"}},O),P=(j=function(t,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),A="ws://localhost:8181/websocket",N="on_open",E="on_close",C="on_message",I="on_error",M="request_uuid",x=(P(W,S=L),W.prototype.ready=function(t){var e=this;this._initialized?this._active?v.funcInvoke(t,!0):(v.funcDelay(function(){e._active||(e.off(e),v.funcInvoke(t,!1,"timeout"),e.free())},3e3),this.off(this),this.on(this,N,function(){e.off(e),v.funcInvoke(t,!0)})):v.funcInvoke(t,!1,"not initialized")},W.prototype.reset=function(){this._callback_pool={},this.close(),this.open()},Object.defineProperty(W.prototype,"initialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),W.prototype.open=function(){if(!this._web_socket)try{this._web_socket=this.createWs(),this.handle(this._web_socket)?this._initialized=!0:this._initialized=!1}catch(t){console.error("WebSocketChannel.open",t)}return this},W.prototype.close=function(){try{this._active&&(this._initialized=!1,this._active=!1,this.free())}catch(t){console.error("WebSocketChannel.close",t)}},W.prototype.send=function(t,e){var n=this;try{if(this._active&&this._web_socket&&this._web_socket.readyState===this._web_socket.OPEN){if(e){var o=r.guid();t[M]=o,this._callback_pool[o]=e,v.funcDelay(function(){delete n._callback_pool[o],console.debug("WebSocketChannel.send","timeout removed "+o)},1e4)}this._web_socket.send(v.toString(t))}else console.warn("WebSocketChannel.send","Socket is not ready to send message.",this._web_socket,t)}catch(t){console.error("WebSocketChannel.send",t)}},W.prototype.createWs=function(){return new(v.window.WebSocket||v.window.MozWebSocket)(this._host)},W.prototype.free=function(){if(this._web_socket){try{this._web_socket.close()}catch(t){console.debug("WebSocketChannel.free",t)}this._web_socket=null}},W.prototype.handle=function(t){return t?(t.onmessage=this._on_message.bind(this),t.onopen=this._on_open.bind(this),t.onclose=this._on_close.bind(this),t.onerror=this._on_error.bind(this),!0):(console.warn("WebSocketChannel.handle","WebSocket not found",t),!1)},W.prototype._on_open=function(t){this._active=!0,this.emit(N)},W.prototype._on_close=function(t){this._active=!1,this.emit(E)},W.prototype._on_message=function(t){try{t.origin,t.ports;var e=v.parse(t.data);if(e[M]){var n=e[M];if(this._callback_pool[n]){var o=this._callback_pool[n];v.isFunction(o)&&o(e)}delete this._callback_pool[n],e.request_uuid_handled=!0}this.emit(C,e)}catch(t){console.error("WebSocketChannel._on_message",t)}},W.prototype._on_error=function(t){t.preventDefault();var e=v.toString(t);console.error("WebSocketChannel._on_error",e),this.emit(I,e)},W);function W(t){var e=S.call(this)||this;return e._initialized=!1,e._active=!1,e._host=t&&t.host||A,e._callback_pool={},e}var D,z,F=((D=function(t,e){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}D(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(T,z=L),Object.defineProperty(T.prototype,"host",{get:function(){return this._params&&this._params.host||""},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"isConnected",{get:function(){return this._is_connected},enumerable:!0,configurable:!0}),T.prototype.send=function(n,o){var r=this;this.socket.open().ready(function(t,e){t?r.socket.send(n,o):v.funcInvoke(o,{error:e})})},T.prototype.close=function(){this._socket&&this.socket.initialized&&this.socket.close()},T.prototype.reset=function(){this._socket&&this.socket.initialized&&this.socket.reset()},T.prototype.on=function(t,e){z.prototype.on.call(this,this,t,e)},T.prototype.off=function(t){z.prototype.off.call(this,this,t)},Object.defineProperty(T.prototype,"socket",{get:function(){return this._socket||(this._socket=new x(this._params),this._socket.on(this,N,this.onOpen),this._socket.on(this,E,this.onClose),this._socket.on(this,C,this.onMessage),this._socket.on(this,I,this.onError)),this._socket},enumerable:!0,configurable:!0}),T.prototype.onOpen=function(){this._is_connected=!0,this.emit(N)},T.prototype.onClose=function(){this._is_connected=!1,this.emit(E)},T.prototype.onMessage=function(t){this.emit(C,t)},T.prototype.onError=function(t){this._is_connected=!1,this.emit(I,t)},T);function T(t){var e=z.call(this)||this;return v.isString(t)?e._params={host:t}:e._params=t||{},e._is_connected=!1,e}var K,R,X=function(t,e){function n(){this.constructor=t}K(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},q=(K=function(t,e){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},"__vws"),B=window;function U(){var t=R.call(this)||this;return t.init(),t}(X(U,R=s),U.prototype.start=function(){h.debug("launcher.start()"),B[q]={version:"1.0.1",create:this.newClient}},U.prototype.init=function(){s.PREFIX=q+"_",h.uid=q,h.level=a.info},U.prototype.newClient=function(t){return t=v.isString(t)?{host:t}:t||{},new F(t)},U.instance=function(){return null==U.__instance&&(U.__instance=new U),U.__instance},U).instance().start()}]);