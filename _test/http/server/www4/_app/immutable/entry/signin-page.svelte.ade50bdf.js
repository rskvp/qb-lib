var rt=Object.defineProperty;var nt=(r,e,t)=>e in r?rt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ze=(r,e,t)=>(nt(r,typeof e!="symbol"?e+"":e,t),t);import{S as qe,i as He,s as Fe,k as d,q as S,a as E,y as G,l as m,m as g,r as A,h as c,c as w,z as j,n as u,b as B,E as l,Z as te,A as W,L as ge,T as ve,u as ot,v as it,d as M,f as ct,g as R,B as z,O as ut,Y as ft,N as oe,w as tt,W as st,X as lt}from"../chunks/index.3d647e04.js";import{H as dt,a as Ue,v as Ke,r as Qe,e as mt,f as pt,u as ht,S as at}from"../chunks/validators.bd226519.js";import{U as xe,S as _t}from"../chunks/auth.a2ed5a1a.js";import{c as Me,a as $e,b as Re,m as et}from"../chunks/authstore.ea07bff9.js";import{g as gt}from"../chunks/navigation.d730aea0.js";class vt{constructor(){Ze(this,"_storage",window.localStorage)}get(e){return this._storage&&this._storage.getItem(e)||""}set(e,t){return this._storage&&this._storage.setItem(e,t),self}remove(e){return this._storage&&this._storage.removeItem(e),self}clear(){return this._storage&&this._storage.clear(),self}getBool(e){return(this.get(e)||"false").toLowerCase()==="true"}}let Be;function $t(){return Be||(Be=new vt),Be}const N=$t();function bt(r){let e,t;return{c(){e=d("small"),t=S("This is a mandatory field")},l(s){e=m(s,"SMALL",{});var n=g(e);t=A(n,"This is a mandatory field"),n.forEach(c)},m(s,n){B(s,e,n),l(e,t)},p:oe,d(s){s&&c(e)}}}function Et(r){let e,t;return{c(){e=d("small"),t=S("Email is not valid")},l(s){e=m(s,"SMALL",{});var n=g(e);t=A(n,"Email is not valid"),n.forEach(c)},m(s,n){B(s,e,n),l(e,t)},p:oe,d(s){s&&c(e)}}}function wt(r){let e,t,s,n;return e=new Ue({props:{on:"required",$$slots:{default:[bt]},$$scope:{ctx:r}}}),s=new Ue({props:{on:"email",hideWhenRequired:!0,$$slots:{default:[Et]},$$scope:{ctx:r}}}),{c(){G(e.$$.fragment),t=E(),G(s.$$.fragment)},l(a){j(e.$$.fragment,a),t=w(a),j(s.$$.fragment,a)},m(a,o){W(e,a,o),B(a,t,o),W(s,a,o),n=!0},p(a,o){const _={};o&8192&&(_.$$scope={dirty:o,ctx:a}),e.$set(_);const $={};o&8192&&($.$$scope={dirty:o,ctx:a}),s.$set($)},i(a){n||(R(e.$$.fragment,a),R(s.$$.fragment,a),n=!0)},o(a){M(e.$$.fragment,a),M(s.$$.fragment,a),n=!1},d(a){z(e,a),a&&c(t),z(s,a)}}}function kt(r){let e,t;return{c(){e=d("small"),t=S("This is a mandatory field")},l(s){e=m(s,"SMALL",{});var n=g(e);t=A(n,"This is a mandatory field"),n.forEach(c)},m(s,n){B(s,e,n),l(e,t)},p:oe,d(s){s&&c(e)}}}function Lt(r){let e,t,s,n,a,o,_;function $(i){r[12](i)}let h={name:"slide"};return r[4]!==void 0&&(h.checked=r[4]),t=new at({props:h}),tt.push(()=>st(t,"checked",$)),{c(){e=d("label"),G(t.$$.fragment),n=E(),a=d("span"),o=S("Remember Me"),this.h()},l(i){e=m(i,"LABEL",{class:!0});var p=g(e);j(t.$$.fragment,p),n=w(p),a=m(p,"SPAN",{class:!0});var k=g(a);o=A(k,"Remember Me"),k.forEach(c),p.forEach(c),this.h()},h(){u(a,"class",""),u(e,"class","badge variant-filled clickable")},m(i,p){B(i,e,p),W(t,e,null),l(e,n),l(e,a),l(a,o),_=!0},p(i,p){const k={};!s&&p&16&&(s=!0,k.checked=i[4],lt(()=>s=!1)),t.$set(k)},i(i){_||(R(t.$$.fragment,i),_=!0)},o(i){M(t.$$.fragment,i),_=!1},d(i){i&&c(e),z(t)}}}function St(r){let e,t,s,n,a,o,_;function $(i){r[11](i)}let h={name:"slide"};return r[4]!==void 0&&(h.checked=r[4]),t=new at({props:h}),tt.push(()=>st(t,"checked",$)),{c(){e=d("label"),G(t.$$.fragment),n=E(),a=d("span"),o=S("Remember Me"),this.h()},l(i){e=m(i,"LABEL",{class:!0});var p=g(e);j(t.$$.fragment,p),n=w(p),a=m(p,"SPAN",{class:!0});var k=g(a);o=A(k,"Remember Me"),k.forEach(c),p.forEach(c),this.h()},h(){u(a,"class",""),u(e,"class","badge variant-filled-primary clickable")},m(i,p){B(i,e,p),W(t,e,null),l(e,n),l(e,a),l(a,o),_=!0},p(i,p){const k={};!s&&p&16&&(s=!0,k.checked=i[4],lt(()=>s=!1)),t.$set(k)},i(i){_||(R(t.$$.fragment,i),_=!0)},o(i){M(t.$$.fragment,i),_=!1},d(i){i&&c(e),z(t)}}}function At(r){let e,t,s,n,a,o,_,$,h,i,p,k,V,J,se,b,L,be,D,le,Ee,we,y,ke,H,Le,U,I,P,ie,T,ae,Se,re,Ae,ce,ue,X,F,fe,ye,O,Y,Ie,Z,Pe,Te,K,Ne,Q,Ve,Oe;p=new dt({props:{for:"email",$$slots:{default:[wt]},$$scope:{ctx:r}}}),H=new Ue({props:{for:"password",on:"required",$$slots:{default:[kt]},$$scope:{ctx:r}}});const Ce=[St,Lt],C=[];function Ge(f,v){return f[4]?0:1}return I=Ge(r),P=C[I]=Ce[I](r),{c(){e=d("form"),t=d("h3"),s=S(r[0]),n=E(),a=d("label"),o=d("span"),_=S("Email *"),$=E(),h=d("input"),i=E(),G(p.$$.fragment),k=E(),V=d("label"),J=d("span"),se=S("VAT (optional)"),b=E(),L=d("input"),be=E(),D=d("label"),le=d("span"),Ee=S("Password *"),we=E(),y=d("input"),ke=E(),G(H.$$.fragment),Le=E(),U=d("div"),P.c(),ie=E(),T=d("button"),ae=d("i"),Se=E(),re=d("span"),Ae=S("Login"),ue=E(),X=d("div"),F=d("div"),fe=d("hr"),ye=E(),O=d("div"),Y=d("div"),Ie=S("Do you want to "),Z=d("a"),Pe=S("Register?"),Te=E(),K=d("div"),Ne=S("Forgot Password?"),this.h()},l(f){e=m(f,"FORM",{class:!0});var v=g(e);t=m(v,"H3",{class:!0});var ne=g(t);s=A(ne,r[0]),ne.forEach(c),n=w(v),a=m(v,"LABEL",{class:!0});var q=g(a);o=m(q,"SPAN",{});var x=g(o);_=A(x,"Email *"),x.forEach(c),$=w(q),h=m(q,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),i=w(q),j(p.$$.fragment,q),q.forEach(c),k=w(v),V=m(v,"LABEL",{class:!0});var de=g(V);J=m(de,"SPAN",{});var je=g(J);se=A(je,"VAT (optional)"),je.forEach(c),b=w(de),L=m(de,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),de.forEach(c),be=w(v),D=m(v,"LABEL",{class:!0});var ee=g(D);le=m(ee,"SPAN",{});var We=g(le);Ee=A(We,"Password *"),We.forEach(c),we=w(ee),y=m(ee,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),ke=w(ee),j(H.$$.fragment,ee),ee.forEach(c),Le=w(v),U=m(v,"DIV",{class:!0});var me=g(U);P.l(me),ie=w(me),T=m(me,"BUTTON",{type:!0,class:!0});var pe=g(T);ae=m(pe,"I",{class:!0}),g(ae).forEach(c),Se=w(pe),re=m(pe,"SPAN",{});var ze=g(re);Ae=A(ze,"Login"),ze.forEach(c),pe.forEach(c),me.forEach(c),v.forEach(c),ue=w(f),X=m(f,"DIV",{class:!0});var Je=g(X);F=m(Je,"DIV",{class:!0});var he=g(F);fe=m(he,"HR",{class:!0}),ye=w(he),O=m(he,"DIV",{class:!0});var _e=g(O);Y=m(_e,"DIV",{class:!0});var De=g(Y);Ie=A(De,"Do you want to "),Z=m(De,"A",{href:!0});var Xe=g(Z);Pe=A(Xe,"Register?"),Xe.forEach(c),De.forEach(c),Te=w(_e),K=m(_e,"DIV",{class:!0});var Ye=g(K);Ne=A(Ye,"Forgot Password?"),Ye.forEach(c),_e.forEach(c),he.forEach(c),Je.forEach(c),this.h()},h(){u(t,"class","w-full text-center"),u(h,"class","input"),u(h,"type","email"),u(h,"name","email"),u(h,"placeholder","Enter email address..."),u(a,"class","label"),u(L,"class","input"),u(L,"type","text"),u(L,"name","vat"),u(L,"placeholder","Enter VAT number..."),u(V,"class","label"),u(y,"class","input"),u(y,"type","password"),u(y,"name","password"),u(y,"placeholder","Enter password..."),u(D,"class","label"),u(ae,"class","fa-solid fa-right-to-bracket"),u(T,"type","button"),u(T,"class","btn variant-filled"),T.disabled=ce=!r[5].valid,u(U,"class","mx-auto flex justify-between items-center"),u(e,"class","w-full p-4 text-token space-y-4"),u(fe,"class","!border-t-1"),u(Z,"href","./signup"),u(Y,"class","hover:shadow-lg"),u(K,"class","hover:shadow-lg"),u(O,"class","w-full m-auto flex flex-col items-center pt-4 space-y-2"),u(F,"class","w-[95%] p-4 m-auto"),u(X,"class","w-full text-center")},m(f,v){B(f,e,v),l(e,t),l(t,s),l(e,n),l(e,a),l(a,o),l(o,_),l(a,$),l(a,h),te(h,r[1]),l(a,i),W(p,a,null),l(e,k),l(e,V),l(V,J),l(J,se),l(V,b),l(V,L),te(L,r[3]),l(e,be),l(e,D),l(D,le),l(le,Ee),l(D,we),l(D,y),te(y,r[2]),l(D,ke),W(H,D,null),l(e,Le),l(e,U),C[I].m(U,null),l(U,ie),l(U,T),l(T,ae),l(T,Se),l(T,re),l(re,Ae),B(f,ue,v),B(f,X,v),l(X,F),l(F,fe),l(F,ye),l(F,O),l(O,Y),l(Y,Ie),l(Y,Z),l(Z,Pe),l(O,Te),l(O,K),l(K,Ne),Q=!0,Ve||(Oe=[ge(h,"input",r[8]),ve(Ke.call(null,h,[Qe,mt])),ge(L,"input",r[9]),ge(y,"input",r[10]),ve(Ke.call(null,y,[Qe])),ge(T,"click",r[7]),ve(r[6].call(null,e)),ve(pt.call(null,e,!0))],Ve=!0)},p(f,[v]){(!Q||v&1)&&ot(s,f[0]),v&2&&h.value!==f[1]&&te(h,f[1]);const ne={};v&8192&&(ne.$$scope={dirty:v,ctx:f}),p.$set(ne),v&8&&L.value!==f[3]&&te(L,f[3]),v&4&&y.value!==f[2]&&te(y,f[2]);const q={};v&8192&&(q.$$scope={dirty:v,ctx:f}),H.$set(q);let x=I;I=Ge(f),I===x?C[I].p(f,v):(it(),M(C[x],1,1,()=>{C[x]=null}),ct(),P=C[I],P?P.p(f,v):(P=C[I]=Ce[I](f),P.c()),R(P,1),P.m(U,ie)),(!Q||v&32&&ce!==(ce=!f[5].valid))&&(T.disabled=ce)},i(f){Q||(R(p.$$.fragment,f),R(H.$$.fragment,f),R(P),Q=!0)},o(f){M(p.$$.fragment,f),M(H.$$.fragment,f),M(P),Q=!1},d(f){f&&c(e),z(p),z(H),C[I].d(),f&&c(ue),f&&c(X),Ve=!1,ut(Oe)}}}function yt(r,e,t){let s,{title:n=""}=e;const a=ht();ft(r,a,b=>t(5,s=b));let o=N.get("email"),_=N.get("password"),$=N.get("vat"),h=N.getBool("rememberme");async function i(){try{if(h?(N.set("email",o),N.set("password",_),N.set("vat",$),N.set("rememberme","true")):(N.set("email",""),N.set("password",""),N.set("vat",""),N.set("rememberme","false")),o.length>0&&_.length>0){console.debug("Going to login using username:",o,xe.AccessToken());const b=await _t.signin(o,_,$);console.debug("Response",JSON.stringify(b)),Me.update(L=>b),b.license?($e.update(L=>b.license),console.debug("License:",b.license)):$e.update(L=>Re),await gt("/")}else console.error("Missing email or password!"),Me.update(b=>et),$e.update(b=>Re)}catch(b){console.error("SignIn.submit()",xe.GetErrorMessage(b.message)),Me.update(L=>et),$e.update(L=>Re)}}function p(){o=this.value,t(1,o)}function k(){$=this.value,t(3,$)}function V(){_=this.value,t(2,_)}function J(b){h=b,t(4,h)}function se(b){h=b,t(4,h)}return r.$$set=b=>{"title"in b&&t(0,n=b.title)},[n,o,_,$,h,s,a,i,p,k,V,J,se]}class It extends qe{constructor(e){super(),He(this,e,yt,At,Fe,{title:0})}}function Pt(r){let e,t,s,n,a,o,_;return o=new It({props:{title:""}}),{c(){e=d("div"),t=d("div"),s=d("h2"),n=S("Login"),a=E(),G(o.$$.fragment),this.h()},l($){e=m($,"DIV",{class:!0});var h=g(e);t=m(h,"DIV",{class:!0});var i=g(t);s=m(i,"H2",{class:!0});var p=g(s);n=A(p,"Login"),p.forEach(c),a=w(i),j(o.$$.fragment,i),i.forEach(c),h.forEach(c),this.h()},h(){u(s,"class","text-center pt-[15px]"),u(t,"class","max-w-[640px] card mx-auto"),u(e,"class","h-full mx-auto flex justify-center items-center")},m($,h){B($,e,h),l(e,t),l(t,s),l(s,n),l(t,a),W(o,t,null),_=!0},p:oe,i($){_||(R(o.$$.fragment,$),_=!0)},o($){M(o.$$.fragment,$),_=!1},d($){$&&c(e),z(o)}}}class Tt extends qe{constructor(e){super(),He(this,e,null,Pt,Fe,{})}}function Nt(r){let e,t;return e=new Tt({}),{c(){G(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,n){W(e,s,n),t=!0},p:oe,i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}class qt extends qe{constructor(e){super(),He(this,e,null,Nt,Fe,{})}}export{qt as default};
